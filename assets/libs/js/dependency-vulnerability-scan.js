import { scan } from './app.js';


document.addEventListener('DOMContentLoaded', function() {
    const submitBtn = document.getElementById('submitBtn');
    const loadingOverlay = document.getElementById('loadingOverlay');
    const directoryForm = document.getElementById('directoryForm');

    submitBtn.addEventListener('click', async function(e) {
        e.preventDefault();
        const directoryPath = document.getElementById('directoryPath').value;
        
        if (!directoryPath) {
            alert('Please enter a directory path');
            return;
        }

        loadingOverlay.style.display = 'block';
        try {
            const scanResult = await scan(directoryPath);
            // if (scanResult.success) {
            //     displayScanResults();
            // }
        } catch (error) {
            console.error('Scan failed:', error);
        } finally {
            loadingOverlay.style.display = 'none';
        }
    });
});

// function displayScanResults(vulnerabilities) {
//     try {
//         const tbody = document.getElementById('vulnerabilitiesScanResults');
//         tbody.innerHTML = ''; // Clear existing content
        
//         vulnerabilities.forEach((vuln, index) => {
//             const row = `
//                 <tr>
//                     <td>${index + 1}</td>
//                     <td>${vuln.id}</td>
//                     <td>${vuln.package_url}</td>
//                     <td>${vuln.affected_version}</td>
//                     <td>${vuln.severity}</td>
//                     <td>${vuln.cvss_score}</td>
//                     <td>${vuln.fix_version}</td>
//                     <td>${vuln.recommendation}</td>
//                     <td>${vuln.insights}</td>
//                 </tr>
//             `;
//             tbody.innerHTML += row;
//         });
//     } catch (error) {
//         console.error('Error displaying scan results:', error);
//         alert('Error displaying scan results. Please check the console for details.');
//     }
// }
